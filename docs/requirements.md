# 제품 요구사항 문서 (PRD) - Emotion Tracker

## 1) 제품 개요
- 목적: 하루 동안의 자기결정/요청/즐거움 선택과 휴식 여부를 기록하고, 해야 하지만 하기 싫은 일과 하고 싶었지만 하지 않은 일을 회고하여 변화 추이를 한눈에 확인.
- 대상: 개인 사용자를 1차 목표(이후 멀티 사용자 및 인증 확장 가능).

## 2) 사용자 흐름 (2단계 기록 플로우)
### 페이지 1: 카운트 + 체크
- 상단 안내: "오늘 하루를 기록하세요."
- 입력 라벨/필드:
  1) "아니라고 말 한 횟수" (정수, 0 이상)
  2) "도움을 요청한 횟수" (정수, 0 이상)
  3) "즐거움을 위해 선택한 횟수" (정수, 0 이상)
  4) 체크박스: "휴식을 취했나요?" (불리언)
- 행동: "다음으로" 버튼 → 페이지 2로 이동
- 유효성: 숫자만 입력, 음수 불가, 빈값 불가(기본값 0 허용).

### 페이지 2: 텍스트 입력
- 섹션 A 라벨: "당신이 하고 싶지 않지만 해야 하는 일 세가지"
  - 필드: 세 개의 텍스트 입력(각 항목 1줄, 최대 200자 권장)
- 섹션 B 라벨: "당신이 하고 싶었지만 하지 않은 일 세가지"
  - 필드: 세 개의 텍스트 입력(각 항목 1줄, 최대 200자 권장)
- 행동 버튼: "이전으로"(페이지 1로), "기록하기"(DB로 저장)

## 3) 저장/데이터 모델(초안)
- 엔터티: daily_entries
  - entry_date: 날짜(기본: 오늘, UI는 오늘에 대한 단일 기록 기준)
  - said_no_count: integer (>=0)
  - asked_help_count: integer (>=0)
  - chose_for_joy_count: integer (>=0)
  - took_rest: boolean
  - must_do_tasks: text[3]
  - wanted_but_skipped_tasks: text[3]
  - created_at/updated_at: 서버 타임스탬프
  - (향후) user_id: 인증 도입 시 소유자 식별을 위한 uuid
- 제약:
  - 각 카운트는 0 이상 정수
  - 각 텍스트 필드는 공란 허용하되 최소 1자 권장(초기엔 공란 허용으로 구현 가능)
  - 동일 사용자(user_id) + 동일 날짜(entry_date) 1건만 허용(유니크 제약)

## 4) 조회/히스토리 페이지(요구)
- 최근 기록 리스트: 날짜, 3가지 카운트, 휴식 여부, 주요 텍스트 요약 표시
- 기간 필터(예: 최근 7/30/90일), 월별/주별 전환 추후 가능
- 간단한 차트(막대/꺾은선)로 카운트 변화 시각화(선택)
- 상세보기(선택): 특정 날짜 항목 클릭 시 상세 항목(두 섹션의 3개 텍스트) 표시

## 5) 비기능 요구사항
- 반응형 UI(모바일 우선)
- 접근성 고려(라벨/aria, 키보드 포커스 순서)
- 성능: 단건 입력/조회는 즉시 반응 수준
- 보안: 인증 도입 시 RLS 정책으로 사용자 데이터 격리

## 6) 가정/결정(초기)
- 인증은 2단계로: v1(단일 사용자 또는 임시 익명), v2(Supabase Auth)로 확장
- 텍스트 필드는 "세가지" 요구에 맞춰 정확히 3개 입력 필드를 제공합니다
- 날짜는 기본 오늘로 단일 엔트리; 과거 기록은 히스토리 페이지에서만 확인(수정은 추후)

## 7) 성공 지표(예시)
- D1 기록 완료율(페이지1→페이지2→저장 완료)
- 7일 연속 기록 사용자 수
- 카운트/텍스트 입력 누락률 감소

## 8) 향후 로드맵(요약)
- v1: 로컬/단일 사용자 + Supabase 저장, 기본 히스토리/차트
- v1.1: 입력 편의 UX(증감 버튼, 숫자 키패드), 텍스트 템플릿
- v2: Supabase Auth, 멀티 디바이스 동기화, RLS 정책 적용, 공유/내보내기
